// Mobile sidebar.
@include at-media-query($media-narrow-down) {
  html.js .sidebar-first, html.js .two-sidebars {
    .main {
      padding-left: $grid-padding + $sidebar-collapsed-width;
    }

    .sidebar-first-container {
      @include single-transition(left, .4s, ease-in-out);
      background-color: $primary-color;
      float: left;
      width: 100%;
      cursor: pointer;
      position: absolute;
      left: -100%;
      top: 0;
      border-right: $sidebar-collapsed-width solid darken($primary-color, 10);
      z-index: 100;
      height: 100%;

      .block {
        @include single-transition(opacity, .4s, linear);
        @include opacity(0);
      }
    }

    .sidebar-first-toggle {
      background-color: darken($primary-color, 10);
      width: $sidebar-toggle-width;
      height: $sidebar-toggle-height;
      display: block;
      position: relative;
      right: -($sidebar-toggle-width + $sidebar-collapsed-width);
      float: right;
    }

    &.show-sidebar {
      .main {
        @include clear-container;
        padding-right: $sidebar-visible-gutter;
        cursor: pointer;

        & > *:not(.sidebar-first-container) {
          display: none;
        }
      }

      .sidebar-first-container {
        @include box-sizing(border-box);
        padding-left: $grid-padding;
        padding-right: $grid-padding;
        cursor: default;
        position: relative;
        left: 0;
        height: auto;

        .block {
          @include opacity(1);
        }
      }

      .sidebar-first-toggle {
        right: -($sidebar-toggle-width + $sidebar-collapsed-width + $grid-padding);
      }
    }
  }

  // Fix for hiding the CSS3 transition that appears after loading the page due
  // to the JavaScript delay.
  .sidebar-first-container {
    left: -100%;
  }
}